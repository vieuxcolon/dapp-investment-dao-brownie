#  Base image
FROM node:18-slim

#  Set working directory
WORKDIR /workspace/packages/frontend

#  Copy only package files first (to leverage Docker cache)
COPY package.json ./
# Only copy package-lock.json if it exists
COPY package-lock.json* ./

#  Install dependencies
RUN npm install --legacy-peer-deps

#  Copy the rest of the frontend source
COPY . .

#  Expose Vite port
EXPOSE 5173

#  Default command to run the dev server
CMD ["npm", "run", "dev"]
