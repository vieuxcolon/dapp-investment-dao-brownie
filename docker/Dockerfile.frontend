# 1️⃣ Base image
FROM node:18-slim

# 2️⃣ Set working directory
WORKDIR /workspace/packages/frontend

# 3️⃣ Copy only package files first (to leverage Docker cache)
COPY package.json ./
# Only copy package-lock.json if it exists
COPY package-lock.json* ./

# 4️⃣ Install dependencies
RUN npm install --legacy-peer-deps

# 5️⃣ Copy the rest of the frontend source
COPY . .

# 6️⃣ Expose Vite port
EXPOSE 5173

# 7️⃣ Default command to run the dev server
CMD ["npm", "run", "dev"]

